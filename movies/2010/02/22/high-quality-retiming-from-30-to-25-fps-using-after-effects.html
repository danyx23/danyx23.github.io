<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>High quality retiming from 30 to 25 fps using After Effects</title>
  <meta name="description" content="This is a follow-up post to this general explaination of retiming methods.">

  <script src="https://kit.fontawesome.com/98871ddfec.js" crossorigin="anonymous"></script>

  <!-- Load up MathJax script if needed ... specify in /_data/options.yml file-->
  
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

  <link rel="stylesheet" href="https://use.typekit.net/hil6otl.css">
  <link rel="stylesheet" type="text/css" href="/css/tufte.css">

  <!-- <link rel="stylesheet" href="/css/main.css"> -->
  <link rel="canonical" href="http://danielbachler.de/movies/2010/02/22/high-quality-retiming-from-30-to-25-fps-using-after-effects.html">
  <link rel="alternate" type="application/rss+xml" title="Daniel Bachler" href="http://danielbachler.de/feed.xml">
    <script>
        (function(d) {
            var config = {
                        kitId: 'hil6otl',
                        scriptTimeout: 3000,
                        async: true
                    },
                    h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
        })(document);
    </script>
  <script src="/js/modernizr-custom.js"></script>

</head>


<body>

<header class="site-header">


  <nav class="site-nav site-header">
    <div class="nav-inner">
      <a class="site-title" href="/">DANIELBACHLER.DE</a>
      <!--
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      -->
      <div class="trigger">
        <a class="page-link" href="/">Blog</a>
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/cv.html">CV</a>
          
        
          
          <a class="page-link" href="/about.html">About me</a>
          
        
      </div>
    </div>
    </nav>

</header>


<article class="group">
  <h1>High quality retiming from 30 to 25 fps using After Effects</h1>
<p class="subtitle">February 22, 2010</p>

<p>This is a follow-up post to this <a href="/retiming-methods-shootout">general explaination of retiming methods</a>.</p>

<p>This is my favourite way to retime footage from 30 fps to 25 fps in high quality with After Effects. This method does not use any 3rd party plugins like Twixtor. Off we go:</p>

<p>Import your final film. It should have been edited at 30 (or 29.97 if you converted to cineform and maybe in some other cases too) fps. Go to the footage in the project window and choose Interpret footage. Set the frame rate to your target frame rate (in my case 25 fps).</p>

<p><img height="685" width="515" alt="" class="inline" src="/files/interpret%20footage.jpg" /></p>

<p>Create a new comp based on this footage. It should be set to 25 fps as well. If you take a look then you will see that what is happening now is that we play the footage back with a lower speed. To correct this, apply the TimeWarp effect. You could use the speed parameter, but I prefer to use to keyframe the source frame parameter. Change your project settings to display frames instead of a timecode:</p>

<p><img height="189" width="347" alt="" src="/files/display%20frames.jpg" /><br />

Note the length of your footage in frames. Now calculate the new end point: &lt;number of source frames&gt; / &lt;original framerate&gt; * &lt;target framerate&gt;. Round up if this results in a fraction instead of an integer number. Go to the frame that you calculated (which should be exactly at 5/6th of the total length of your footage/timeline). Add a keyframe for the Source Frame parameter here and set it to the last frame (the number of source frames). Go to the beginning of your comp and keyframe to source frame 0. Set the method that Timewarp uses to Frame Mix (for frame blending) or Pixel Motion (for frame generation). If you scroll through it now (can be very slow with pixel motion) you will see the retimed footage.</p>

<p><a href=")/files/timeline%20simple%20retiming.jpg"><img height="133" width="600" src="/files/timeline%20simple%20retiming.jpg" class="triggerclass" alt="" /></a></p>

<p>If you don&rsquo;t have any hard cuts, you&rsquo;re done now and can render the result. If you have hard cuts, you will want to protect them.</p>

<p>You can go to all hard cuts, keyframe it to one exact frame just before the cut and keyframe it to exactly one frame later after the cut. But this is tedious, so here is a quicker way:</p>

<p>Find all hard cuts and place layer markers there (or let the very nice Magnum script do the work for you).&nbsp; Then add this expression to the source frame parameter:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">marker</span><span class="p">.</span><span class="nx">numKeys</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">n</span> <span class="o">=</span> <span class="nx">marker</span><span class="p">.</span><span class="nx">nearestKey</span><span class="p">(</span><span class="nx">time</span><span class="p">).</span><span class="nx">index</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">t</span> <span class="o">=</span> <span class="p">(</span><span class="nx">time</span> <span class="o">+</span><span class="nx">thisComp</span><span class="p">.</span><span class="nx">frameDuration</span><span class="p">)</span> <span class="o">-</span> <span class="nx">marker</span><span class="p">.</span><span class="nx">key</span><span class="p">(</span><span class="nx">n</span><span class="p">).</span><span class="nx">time</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nx">thisComp</span><span class="p">.</span><span class="nx">frameDuration</span><span class="p">)</span>
		<span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">effect</span><span class="p">(</span><span class="s2">"Timewarp"</span><span class="p">)(</span><span class="mi">4</span><span class="p">))</span>
    <span class="k">else</span>
        <span class="nx">effect</span><span class="p">(</span><span class="s2">"Timewarp"</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">else</span>
	<span class="nx">effect</span><span class="p">(</span><span class="s2">"Timewarp"</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div></div>

<p>It will keep the animated value unless there is a layer marker present at the current or the next frame in which case it will round the time to make sure that no blending across the hard cut occurs.</p>

<p><a href=")/files/timeline%20hard%20cuts%20protected.jpg"><img height="235" width="600" alt="" src="/files/timeline%20hard%20cuts%20protected.jpg" class="triggerclass" /></a></p>

<p>In a future post I will show a way to do the same thing in twixtor which handles the hard cuts differently.</p>

<p>&nbsp;</p>

<p>If you get messed up frames in between you can either switch back to frame blending for the few frames that require it or <a href="/Optimizing-Timewarp-with-Brainstorm">use brainstorm</a> to optimize the optical flow analysis parameters of Timewarp.</p>


</article>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6822886-2', 'auto');
  ga('send', 'pageview');

</script>
</body>

</html>
